<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FileSync - P2P File Sharing</title>

  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/lucide-react@0.292.0/dist/umd/lucide.min.js"></script>

  <!-- Firebase (for signaling only) -->
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
</head>
<body>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
               viewBox="0 0 24 24" fill="none" stroke="currentColor"
               stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" x2="12" y1="3" y2="15"/>
          </svg>
        </div>
        <h1 class="logo-text">File-sync by MHR3D</h1>
      </div>

      <div class="status-pill" id="conn-status" title="Connection status">
        <span class="dot dot-red"></span><span class="status-text">Idle</span>
      </div>

      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <i data-lucide="sun" class="sun-icon"></i>
        <i data-lucide="moon" class="moon-icon"></i>
      </button>
    </header>

    <main class="main-content">
      <!-- Send Files -->
      <div id="send-card" class="card">
        <h2 class="card-title">Send Files</h2>
        <p class="card-description">Share files instantly with a secure 4-digit code (Peer-to-Peer).</p>

        <div id="upload-section">
          <div id="drop-zone" class="drop-zone" tabindex="0" role="button" aria-label="Drop files here or click to browse">
            <input type="file" id="file-input" class="hidden" multiple />
            <div class="upload-icon-container">
              <i data-lucide="upload-cloud"></i>
            </div>
            <p class="drop-zone-text">Drop files here or click to browse</p>
            <p class="drop-zone-subtext">Direct transfer, no cloud storage</p>
            <button id="browse-btn" class="button" type="button">Choose Files</button>
          </div>
        </div>

        <div class="generated-code-container hidden" id="share-code-wrap">
          <div id="share-code" class="generated-code">----</div>
          <button id="copy-code" class="icon-button" title="Copy code" aria-label="Copy code">
            <i data-lucide="copy"></i>
          </button>
          <button id="qr-code" class="icon-button" title="Show QR" aria-label="Show QR">
            <i data-lucide="qr-code"></i>
          </button>
        </div>

        <div id="upload-status-section" class="upload-status hidden"></div>
      </div>

      <!-- Receive Files -->
      <div class="card">
        <h2 class="card-title">Receive Files</h2>
        <p class="card-description">Enter the 4-digit code to connect and receive files (P2P).</p>

        <div class="receive-form">
          <label class="form-label" for="code-inputs">Enter Transfer Code</label>
          <div id="code-inputs" class="code-inputs-container">
            <input type="text" maxlength="1" class="code-input" data-index="0" inputmode="numeric" />
            <input type="text" maxlength="1" class="code-input" data-index="1" inputmode="numeric" />
            <input type="text" maxlength="1" class="code-input" data-index="2" inputmode="numeric" />
            <input type="text" maxlength="1" class="code-input" data-index="3" inputmode="numeric" />
          </div>
          <button id="find-btn" class="button" disabled type="button">Connect</button>
        </div>

        <div class="transfers-section">
          <h3 class="transfers-title">Files Received</h3>
          <div id="transfers-list" class="transfers-list">
            <i data-lucide="download-cloud" class="placeholder-icon"></i>
            <p>No transfers yet</p>
          </div>
        </div>
      </div>
    </main>

    <!-- Why Choose Section -->
    <section class="features-section">
      <h2 class="features-title">Why Choose File-Sync by MHR3D?</h2>
      <p class="features-description">Fast, secure, and private file sharing directly between devices.</p>
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon-container green">
            <i data-lucide="shield-check" class="feature-icon"></i>
          </div>
          <h3 class="feature-item-title">End-to-End P2P</h3>
          <p class="feature-item-description">Files never touch a server, only between you and your peer.</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon-container yellow">
            <i data-lucide="zap" class="feature-icon"></i>
          </div>
          <h3 class="feature-item-title">Instant Transfers</h3>
          <p class="feature-item-description">Connect and send files in seconds using a short code.</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon-container purple">
            <i data-lucide="smartphone" class="feature-icon"></i>
          </div>
          <h3 class="feature-item-title">Mobile Friendly</h3>
          <p class="feature-item-description">Scan QR codes to send or receive files on the go.</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>&copy; 2024 FileSync. Peer-to-peer file sharing made simple.</p>
    </footer>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast" role="status" aria-live="polite">
    <p id="toast-message">An error occurred!</p>
  </div>

  <script src="script.js"></script>
</body>
</html>
